{% extends "dwds_content.html" %}
{% load wagtailcore_tags  wagtailimages_tags humanize %}

{% block main_content_classes %}
    content_page
{% endblock main_content_classes %}

{% block primary_content %}
<div class="grid grid-multiple-columns">
    
    <div class="ws-streamfield-content">
        {% image page.preview_image fill-640x360 width="100%" style="object-fit: cover; border-radius: var(--border-radius);" %}
        {% for block in page.body %}
            {% include_block block %}
        {% endfor %}
    </div>
    <div class="dwds-card dwds-event-card">
        <div>
            <h3>{{ page.event_date|date:"M d Y" }}</h3>
            <h3>{{ page.start_time|time:'g:iA'|lower }} - {{ page.end_time|time:'g:iA'|lower }}</h3>
        </div>
        <div>
            <p>Location</p> 
            <h4>{{ page.location|default_if_none:"-" }} {{ page.location.city|default_if_none:"" }}</h4>
        </div>
        <div>
            <p>Room</p>
            <h4>
                {{ page.room|default_if_none:"-" }} 
                {% if page.room_capacity %}
                    with {{ page.room_capacity }} seats
                {% endif %}
            </h4>
        </div>
        <div>
            <p>Capacity</p> 
            <h4>
                {% if page.room_capacity %}
                    {{ page.room_capacity }} seats
                {% else %}
                    -
                {% endif %}
            </h4>
        </div>
        <div>
            <p>Audience</p>
            <h4>{{ page.get_audience_display }}</h4>
        </div>
        <div>
            {% if not page.is_past_event %}
                {% if page.online_event_url and is_online %}
                        <a href="{{ page.online_event_url }}"
                        class="dwds-button dwds-button--inline dwds-button--secondary">Join event online</a>
                {% endif %}
                {% if page.offline_event_url and is_in_person %}
                        <a href="{{ page.offline_event_url }}"
                        class="dwds-button dwds-button--inline dwds-button--secondary">Register to join</a>
                {% endif %}
                {% if page.submit_questions_url %}
                        <a href="{{ page.submit_questions_url }}"
                        class="dwds-button dwds-button--inline dwds-button--secondary">Submit a question</a>
                {% endif %}
            {% elif page.event_recording_url %}
                    <a href="{{ page.event_recording_url }}"
                    class="dwds-button dwds-button--inline dwds-button--secondary">View event recording</a>
            {% endif %}
        </div> 
    </div>
</div>
{% endblock primary_content %}

{% block secondary_content %}
    Secondary column
{% endblock secondary_content %}
