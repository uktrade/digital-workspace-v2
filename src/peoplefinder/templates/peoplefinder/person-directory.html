{% extends "dwds_content.html" %}
{% load wagtailroutablepage_tags %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load cards %}

{% block bookmark %}
{% endblock bookmark %}

{% block title %}
    {{ page_title }}
{% endblock title %}

{% block page_title_wrapper %}
{% endblock page_title_wrapper %}

{% block primary_content_classes %}
{% endblock primary_content_classes %}

{% block primary_content %}
    <div class="content-stack large">
        {% include "peoplefinder/includes/listing_header.html" %}

        {% if search_query %}<h2>Showing results for "{{ search_query }}"</h2>{% endif %}

        {% if paginator.count == 1 %}
            <p>{{ paginator.count }} person</p>
        {% elif paginator.count %}
            <p>{{ paginator.count }} people</p>
        {% endif %}

        {% if object_list %}
            <div class="content-grid grid-cards-auto-fill">
                {% for person in object_list %}
                    <div class="dwds-content-item-card">
                        {% url 'profile-view' person.slug as profile_url %}
                        {% if person.photo %}
                            {% include "dwds/components/profile_info.html" with show_profile_image=True profile_image_url=person.photo.url name=person.full_name title=person.roles.first.job_title location=person.uk_office_location.city profile_url=profile_url %}
                        {% else %}
                            {% include "dwds/components/profile_info.html" with show_profile_image=True name=person.full_name title=person.roles.first.job_title location=person.uk_office_location.city profile_url=profile_url %}
                        {% endif %}
                    </div>
                {% endfor %}

            </div>
        {% else %}
            <p>No one was found, please try a different search term.</p>
        {% endif %}
        {% if is_paginated %}
            {% include "dwds/components/pagination.html" with pages=page_obj %}
        {% endif %}
    </div>
{% endblock primary_content %}

{% block secondary_content %}
{% endblock secondary_content %}
