{% extends "dwds/elements/extendable/card.html" %}
{% load wagtailimages_tags static humanize %}

{% block card_container_classes %}
    dwds-one-up-card card-with-image image-right
{% endblock card_container_classes %}

{% block card_header %}
{% endblock card_header %}

{% block card_content_image %}
    {% if thumbnail %}
        {% image thumbnail fill-420x240 %}
    {% else %}
        <img src="{% static '/images/dwds/fallback_image_card.png' %}"
             alt="Colourful circles on a blue background.">
    {% endif %}
{% endblock card_content_image %}

{% block card_content %}
    <div class="card-body card-body-stack">
        {% block card_content_body %}
            {% if ribbon_text %}
                {% include "dwds/elements/ribbon.html" with text=ribbon_text colour="blue" %}
            {% endif %}
            <h2>
                <a class="no-underline" href="{{ url }}">{{ title }}</a>
            </h2>
            {% if post_title %}
                <div class="post-title-container">
                    <h4 class="post-title">{{ post_title }}</h4>
                </div>
            {% endif %}
            {% if excerpt %}<p>{{ excerpt|truncatewords:16 }}</p>{% endif %}
        {% endblock card_content_body %}
    </div>
{% endblock card_content %}

{% block card_footer_body %}
    {% if updated_date > created_date %}
        <time>
            Updated {{ updated_date|naturalday:'j F Y' }}
            {% if updated_date|naturalday in 'yesterday, today' %}at {{ updated_date|time:'g:iA'|lower }}{% endif %}
        </time>
    {% elif created_date %}
        <time>
            Added {{ created_date|naturalday:'j F Y' }}
            {% if created_date|naturalday in 'yesterday, today' %}at {{ created_date|time:'g:iA'|lower }}{% endif %}
        </time>
    {% endif %}
    {% if comment_count %}
        <span class="card-comment-section">
            <img class="comment-icon"
                 src="{% static '/images/dwds/icons/comment_icon.svg' %}"
                 alt="Comment bubble icon.">
            {{ comment_count }} Comment{{ comment_count|pluralize }}
        </span>
    {% endif %}
{% endblock card_footer_body %}
