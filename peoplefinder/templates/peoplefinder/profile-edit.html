{% extends 'peoplefinder/page.html' %}

{% load render_bundle from webpack_loader %}

{% block content %}
{% render_bundle 'htmx' 'js' %}

<h1 class="govuk-heading-l">Edit profile</h1>
<form class="ws-profile-edit-form" method="post">
    {% csrf_token %}

    <fieldset>
        <h2 class="govuk-heading-m">Personal details</h2>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.first_name.id_for_label }}">First name</label>
            {{ form.first_name }}
        </div>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.last_name.id_for_label }}">Last name</label>
            {{ form.last_name }}
        </div>

        <details class="govuk-details" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Add pronouns (optional)
                </span>
            </summary>
            <div class="govuk-details__text">
                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.pronouns.id_for_label }}">My pronouns</label>
                    {{ form.pronouns }}
                </div>
            </div>
        </details>
    </fieldset>

    <fieldset>
        <h2 class="govuk-heading-m">Email addresses</h2>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.email.id_for_label }}">Main work email address</label>
            <span class="govuk-hint">Enter your own official work email address provided by the organisation you are directly employed by or contracted to.</span>
            {{ form.email }}
        </div>

        <div class="govuk-warning-text">
            <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
            <strong class="govuk-warning-text__text">
                <span class="govuk-warning-text__assistive">Warning</span>
                Do not enter any of the following as your main work email address:
                <ul class="govuk-body">
                    <li>a shared email address, for example, a Private Office or jobshare mailbox</li>
                    <li>a secondary work email address, for example, a trade.gov.uk email address if you are employed by FCO at post</li>
                    <li>an alternative work email address that is not safe for official information, for example, fcowebmail.gov.uk</li>
                    <li>a personal email address, for example, Gmail</li>
                </ul>
            </strong>
        </div>

        <p class="govuk-body govuk-inset-text">
            If you want to show a different email address on your profile for your colleagues to contact you on instead,
            for example a jobshare mailbox or your Private Office address, you can:
            <details class="govuk-details" data-module="govuk-details">
                <summary class="govuk-details__summary">
                    <span class="govuk-details__summary-text">
                        Add a contact email address (optional)
                    </span>
                </summary>
                <div class="govuk-details__text">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="{{ form.contact_email.id_for_label }}">Contact email address</label>
                        <span class="govuk-hint">
                            Enter the email address your colleagues should contact you on, for example,
                            a jobshare or Private Office mailbox. This will be shown on your profile
                            instead of your main work email address. Do not enter a personal email address,
                            or a work email address that is not safe for official information.
                        </span>
                        {{ form.contact_email }}
                    </div>
                </div>
            </details>
        </p>

    </fieldset>

    <fieldset>
        <h2 class="govuk-heading-m">Contact details</h2>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.primary_phone_number.id_for_label }}">Preferred contact number</label>
            <span class="govuk-hint">Enter your preferred contact telephone number. Include your country dialling code.</span>
            {{ form.primary_phone_number }}
        </div>

        <details class="govuk-details" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Add alternative contact number (optional)
                </span>
            </summary>
            <div class="govuk-details__text">
                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.secondary_phone_number.id_for_label }}">Alternative contact number</label>
                    <span class="govuk-hint">Enter an alternative contact telephone number. Include your country dialling code.</span>
                    {{ form.secondary_phone_number }}
                </div>
            </div>
        </details>
    </fieldset>

    <fieldset>
        <h2 class="govuk-heading-m">Location and working patterns</h2>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.country.id_for_label }}">Country</label>
            {{ form.country }}
        </div>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.town_city_or_region.id_for_label }}">Town, city or region</label>
            <span class="govuk-hint">For example, London</span>
            {{ form.town_city_or_region }}
        </div>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.building.id_for_label }}">Where do you usually work?</label>
            {{ form.building }}
        </div>

        <details class="govuk-details" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Add UK regional or international location (if applicable)
                </span>
            </summary>
            <div class="govuk-details__text">
                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.regional_building.id_for_label }}">UK regional building or location</label>
                    {{ form.regional_building }}
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.international_building.id_for_label }}">International building or location</label>
                    {{ form.international_building }}
                </div>
            </div>
        </details>

        <details class="govuk-details" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Add location in building or change working days (optional)
                </span>
            </summary>
            <div class="govuk-details__text">
                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.location_in_building.id_for_label }}">Where in the building do you work?</label>
                    <span class="govuk-hint">Skip this question if you work in a Foreign and Commonwealth Office (FCO) building</span>
                    {{ form.location_in_building }}
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label" for="{{ form.workdays.id_for_label }}">Which days do you usually work?</label>
                    {% include 'peoplefinder/components/checkboxes.html' with field=form.workdays %}
                </div>
            </div>
        </details>
    </fieldset>

    <fieldset>
        <h2 class="govuk-heading-m">Grade and manager</h2>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.grade.id_for_label }}">Grade</label>
            {{ form.grade }}
        </div>

        <div class="govuk-form-group">
            <label class="govuk-label" for="{{ form.manager.id_for_label }}">Manager</label>
            {% include 'peoplefinder/components/manager/main.html' with profile=profile manager=profile.manager %}
        </div>

        <div class="govuk-form-group">
            {% include 'peoplefinder/components/checkbox.html' with checkbox=form.do_not_work_for_dit %}
        </div>
    </fieldset>

    <input class="govuk-button" type="submit" value="Save profile">
    <a class="govuk-button govuk-button--secondary" href="{% url 'profile-view' profile.user.id %}">Cancel and go back</a>
</form>
{% endblock %}