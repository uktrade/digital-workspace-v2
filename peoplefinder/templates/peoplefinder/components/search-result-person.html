{% load webpack_static from webpack_loader %}
<div class="pf-person-search-result">
    <div class="pf-person-search-result__picture {{ person.is_active|yesno:',inactive-profile' }}">
        <a href="{% url 'profile-view' person.slug %}"
           onclick="gtm_data_then_click(this, { 'event': 'search_result', 'search_result_selected_url': '{% url 'profile-view' person.slug %}', 'search_result_selected_type': 'person', 'search_result_selected_section': 'people', 'search_result_selected_number_overall': {{ forloop.counter|add:num_prev_results }}, 'search_result_selected_number_section': {{ forloop.counter }}, 'search_result_selected_page': {{ page }} })">
            {% if person.photo %}
                <img src="{{ person.photo.url }}">
            {% else %}
                <img src="{% webpack_static 'no-photo-large.png' %}">
            {% endif %}
        </a>
    </div>
    <div class="pf-person-search-result__details">
        {% if not person.is_active %}
            <div class="pf-person-search-result__details__item">
                <strong class="govuk-tag govuk-tag--orange">Inactive</strong>
            </div>
        {% endif %}
        <div class="pf-person-search-result__details__item">
            <a class="govuk-link govuk-body govuk-!-font-weight-bold"
               href="{% url 'profile-view' person.slug %}"
               onclick="gtm_data_then_click(this, { 'event': 'search_result', 'search_result_selected_url': '{% url 'profile-view' person.slug %}', 'search_result_selected_type': 'person', 'search_result_selected_section': 'people', 'search_result_selected_number_overall': {{ forloop.counter|add:num_prev_results }}, 'search_result_selected_number_section': {{ forloop.counter }}, 'search_result_selected_page': {{ page }} })">
                {{ person.full_name }}
            </a>
        </div>
        <div class="pf-person-search-result__details__item">
            <a class="govuk-link"
               href="{% url 'profile-view' person.slug %}"
               onclick="gtm_data_then_click(this, { 'event': 'search_result', 'search_result_selected_url': '{% url 'profile-view' person.slug %}', 'search_result_selected_type': 'person', 'search_result_selected_section': 'people', 'search_result_selected_number_overall': {{ forloop.counter|add:num_prev_results }}, 'search_result_selected_number_section': {{ forloop.counter }}, 'search_result_selected_page': {{ page }} })">
                {% for role in person.roles.all %}
                    {{ role.job_title }} in {{ role.team.name }}
                    <br>
                {% endfor %}
            </a>
        </div>
        <div class="pf-person-search-result__details__item">
            <a class="govuk-link"
               href="mailto:{{ person.preferred_email }}"
               onclick="gtm_data_then_click(this, { 'event': 'search_result', 'search_result_selected_url': '{% url 'profile-view' person.slug %}', 'search_result_selected_type': 'person', 'search_result_selected_section': 'people', 'search_result_selected_number_overall': {{ forloop.counter|add:num_prev_results }}, 'search_result_selected_number_section': {{ forloop.counter }}, 'search_result_selected_page': {{ page }}, 'search_result_selected_action': 'email'})">
                {{ person.preferred_email }}
            </a>
        </div>
        {% if person.primary_phone_number %}
            <div class="pf-person-search-result__details__item">
                <a class="govuk-link"
                   href="tel:{{ person.primary_phone_number }}"
                   onclick="gtm_data_then_click(this, { 'event': 'search_result', 'search_result_selected_url': '{% url 'profile-view' person.slug %}', 'search_result_selected_type': 'person', 'search_result_selected_section': 'people', 'search_result_selected_number_overall': {{ forloop.counter|add:num_prev_results }}, 'search_result_selected_number_section': {{ forloop.counter }}, 'search_result_selected_page': {{ page }}, 'search_result_selected_action': 'phone'})">
                    {{ person.primary_phone_number }}
                </a>
            </div>
        {% endif %}
        {% if person.all_languages %}
            <div class="pf-person-search-result__details__item govuk-body-s">
                <strong>Languages:</strong> {{ person.all_languages }}
            </div>
        {% endif %}
        {% if person.key_skills.exists or person.other_key_skills %}
            <div class="pf-person-search-result__details__item govuk-body-s">
                <strong>Key skills:</strong> {{ person.get_all_key_skills|join:", " }}
            </div>
        {% endif %}
        {% if person.learning_interests.exists or person.other_learning_interests %}
            <div class="pf-person-search-result__details__item govuk-body-s">
                <strong>Learning and development interests:</strong> {{ person.get_all_learning_interests|join:", " }}
            </div>
        {% endif %}
    </div>
</div>
