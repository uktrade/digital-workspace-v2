<div class="search-results__category">
    {% if heading %}
        <h3 class="govuk-heading-s">{{ count }} {{ heading }}</h3>
    {% endif %}

    <div class="search-results__list" data-search-category="{{ search_category }}">
        {% if pinned_results %}
            <div class="pinned">
                <h3 class="govuk-heading-s">Featured pages</h3>
                {% for result in pinned_results %}
                    {% include search_results_item_template with object=result forloop=forloop type="page" section="pinned" num_prev_results=0 only %}
                {% endfor %}
            </div>
        {% endif %}

        {% if search_results %}
            {% for result in search_results %}
                {% include search_results_item_template with object=result forloop=forloop type=search_category section=search_category num_prev_results=num_pinned_results only %}
            {% endfor %}
        {% else %}
            <p class="govuk-body">There are no matching {{ heading|default:"results" }}.</p>

            {% if search_category == 'all_pages' %}
            {% comment %} Only show this in the main pages section of the "all" results {% endcomment %}
                <p class="govuk-body">Improve your search results by:</p>
                <ul class="govuk-list govuk-list--bullet">
                    <li>double-checking your spelling</li>
                    <li>using fewer keywords</li>
                    <li>searching for something less specific</li>
                </ul>
            {% endif %}
        {% endif %}
    </div>

    {% if search_results.has_other_pages %}
        {% include 'includes/pagination_v2.html' with page=search_results %}
    {% endif %}
    {% if is_limited %}
        <a href="{% url 'search:category' search_category %}?query={{ search_query }}" class="govuk-button govuk-button--secondary" onclick="gtm_data_then_click(this, { 'event': 'search-ui', 'search_ui': 'see_all_{{ search_category }}' })">See all {{ search_category }} results</a>
    {% endif %}
</div>
